<div class="page-layout">
  <aside class="side-actions" aria-hidden="false">
    <div class="toolbar-card vertical" role="toolbar" aria-label="Talent actions">
      <div class="talent-badge" *ngIf="talent.name" aria-hidden="false">
        <div class="badge-name">{{ talent.name }}</div>
        <div class="badge-sub" *ngIf="talent.japanese_name">{{ talent.japanese_name }}</div>
      </div>
      <button class="btn btn-ghost" routerLink="/list" aria-label="Talent list">
        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        <span>Talent List</span>
      </button>

      <button class="btn btn-primary search-btn" (click)="searchBuyeeForTalent()" aria-label="Search talent on Mercari" title="Search for {{ talent.name }} on Mercari">
        <svg class="icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
          <circle cx="11" cy="11" r="5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></circle>
        </svg>
        <span>Search for talent on Mercari</span>
      </button>
    </div>
  </aside>

  <ng-container *ngIf="isSignedIn$ | async; else textTalentList">
    <main class="gallery">
      <div class="container">
        <div class="row">
          <div class="col" *ngFor="let set of talent.sets">
            <div class="image-card">
              <a class="image-link" target="_blank" rel="noopener noreferrer" [href]="set.href">
                <div class="bubble">
                  <img [src]="set.image_url" alt="{{talent.name }}" />
                  <button class="set-btn" type="button" (click)="searchBuyeeForSet(set.name)">
                    Search Mercari
                  </button>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </ng-container>
</div>

<ng-template #textTalentList>
  <section class="talent-text-list">
    <button
      class="talent-text-btn"
      type="button"
      *ngFor="let set of talent.sets"
      (click)="searchBuyeeForSet(set.name)"
    >
      {{ set.name }}
    </button>
  </section>
</ng-template>

<p *ngIf="(isSignedIn$ | async) && talent.sets.length === 0 && talent.name !== ''">No merch could be found for this talent.</p>
